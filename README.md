# MC Trade Post  

## Description

This add-on extends the MineColonies mod.  It, and it's dependencies, are required for MC Trade Post to function. MineColonies base functionality is not altered. The team supporting MineColonies has created a great mod that has provided hours of fun, and inspired these small additions.

__WARNING__: It has been reported that removing the Trade Post mod once it has been used in a colony causes the colony to become corrupt beyond repair. If you no longer want to use Trade Post I recommend you deconstruct the buildings but leave the jar file in place.

MC Trade Post introduces an economic system which allows the selling of excess items for Trade Coins (‡). These coins are used for a variety of purposes, the most significant of which is __inter-colony trade via rail__.  They can also be used to making wishes at a wishing well, unlocking vacations and resorts at which your colonists can improve stats and get happier, unlocking a recycling center to turn your warehouse full of old parts into useful materials and other additional upgrades and features that will be added as the mod progresses.

### In-Game How-To

Consult the "Economics" research line in the University for some tips on where to get started with the features in this mod.

### Buildings
#### Marketplace
Gives you a place for a Shopkeeper to work. They can make just about anything (configured in the hut block) into a cute souvenir to sell to the visitors in the colony, generating Trade Coins (‡).

#### Resort
A resort attracts your citizens who are feeling overworked. Guest Services will tend to vacationing citizens, who can relax and repair their adverse stat, and generate some Trade Coins (‡) for the colony while taking a break from work.

#### Recycling Center
The recycling center can help you break down your old building materials and other equipment into their raw components so they can be reused. Up to two recycling processes per building level can be in progress at once, and a skilled Recycling Engineer can speed up the process. Success of recycling depends on a variety of factors, including the building level, the level of damage something has taken (if damageable) and the primary skill of the recycling engineer handling the work.

If nothing will be generated by recycling an item, it will simply be shelved in the building (rather than destroyed for nothing).

#### Train Station
This building facilitates inter-colony trade. Your station master will check to see if the tracks connect to a train station in another colony.  Once connected, you can configure the imports you want to be shipped to you (including the quantity and the amount of Trade Coin you will pay for them), and select which exports to other colonies that you wish to fulfil. 

Train stations also increase the number of visitors to your colony, which means more shopping at the marketplace!

#### Pet Shop
The Pet Shop is where the Animal Trainer raises and trains pets for the colony. These pets can take on useful tasks.

Currently the only pet is a Pet Wolf, and the only task these pets perform is herding animals. You can assign the pet to a herding building and they will collect the appropriate animals in the area and herd them towards the assigned work building.

Future releases will increase the number and variety of pets and pet tasks.

### Jobs
* The Shopkeeper works in the Marketplace, keeping the shelves stocked with souvenirs and ordering up new supply as needed.
* Guest Services staffs the resort, finding out what the vacationers need to relax, and bringing it to them.
* The Bartender also works at the resort, mixing up delicious treats that help the vacationers relax.
* The Recycling Engineer handles all recycling requests at the Recycling Center.
* The Station Master handles track validation and managing imports and exports.
* The Animal Trainer trains pets.

### Research
This mod introduces the "Economics" line of research. Explore it to unlock Trade Post custom buildings and their capabilities.

### Custom Items
* Building huts associated with the buildings described above.
* Souvenir - intended primarly to be sold at the marketplace, but may have decorative value.
* Advanced Clipboard - Just like the regular clipboard but with a button that filters the outstanding needs down to only those expected to be fulfilled by a player.  
* Trade Coin - These coins can be minted from the marketplace by sneak-right-clicking your advanced clipboard on the Marketplace hut. The hut must be upgraded, first! Trade Coins will (eventually) be used as the basis for triggering most Trade Post mod features.  Coins can be used at a Wishing Well to trigger certain effects.
* A variety of items that support Guest Servcies and Bartender's ability to serve at the resort.

### Custom Blocks
* Block implementations of the building huts.
* A few new building materials (mixed stone, thatch, plaster, rough stone, weathered rough stone, rough brick, endethyst, endmarine, marine lapis, woven kelp)
* A few new Architect's Cutter recipes in the Timberframe style.
* Trough - herding pets will herd animals towards a Trough if it is placed in a herding building and the pet is assigned to work at that building.

### Configuration
This mod supports the Neoforge configuration hooks, and can be configured in-game. These configurations are reasonably well described there.

### Making Wishes
When you throw a Trade Coins (‡) into a wishing well with another object, your wish might come true!

Look in the JEI for ritual recipes the Trade Coin can be used for.

Ritual recipes are configured through a datapack entry.

### Citizen Behaviors
Citizens who have been worked too hard (low Adverse skill) will occassionally go on vacation, where their Adverse skill is repaired, and some income for the colony is generated.

### Visitor Behaviors
Visitors will go shopping at the marketplace, once built.

## Installation
Download the appropriate mctradepost-x.y.z.jar file from Github at the root project directory.  
Copy that Jar file into your mods directory.  
Note that MineColonies and its dependencies must be present to work.  JEI is recommended, but not required.

### Compatibility Reference
mctradepost-0.16.007+ -> MineColonies 1.1.1047 (Minecraft 1.21.1)  with the NeoForge loader.
There are no plans to support earlier versions of Minecraft or other Mod Loaders.
Later version of Minecraft support should follow closely behind the Minecolonies support of those versions.

## Style Packs
### Economic
This style pack has the default building designs for the new hut blocks introduced by MC Trade Post

### Hills
This style pack has buildings designed for use in hilly terrain, with relatively small footprints.

## Building Design Reference
### Marketplace
The marketplace building should have two item frames or glowing item frames for each level of the building.
These frames should be mounted in empty (air) blocks tagged with the "display_shelf" tag.  (Apply the tag to a placeholder item, then remove that placeholder and put the frame in.)

### Wishing Well
A wishing well can be created by surrounding a 2x2 puddle of water (depth 1) with mixed stone.

### Resort
A resort requires a number of blocks be identified with the "relaxation_station" tag.  Visitors to the resort will go there and relax.

### Recycling Center
A recycling center requires one or more non-rack chests identified with the "input_container" tag. Items in these will be broken down into their ingredient components. It also requires one or more "output_container" chests, where the product of the recycling will be placed.
Finally, some number of "grinder" blocks, which simply designates the equipment of the recycler, and gives the Recycling Engineer some guidance on where to maintain the equipment (purely visual - no functional effects).

### Station
A station building must include one or more rail blocks tagged with "station_start". These are used to determine whether or not a station is connected to other colonies for the purposes of trade. Once connected, you can configure what goods you want to import, or choose to satisfy other colonies' needs by exporting goods.

### Pet Shop
There are no tag or structural requirements for the pet shop.

## Current Status
This mod can best be described as in a "beta" state. Existing functionality is mostly stable, with tweaks and adjustments being made based on testing and feedback.

### Roadmap (Roughly Prioritized)
#### In Progress
Building: Pet Shop (enables pet functions, pet-related colony roles.) [Testing]
Pets - Ability: animal herding [Testing]

#### Future
Style: Trade Shop (Introducing classic MineColonies buildings in the Trade Post style. This will be a slow roll-out as inspiration strikes.)

Pet - Module: Add pet function and position to tooltip.
Pets - Variety
Pets - Building: Assign Role
Pets - Animal Trainer AI: Feed (heal) pet.
Pets - Recipe: Pet Food (made by animal trainer)
Pets - Ability: Find mushrooms
Pets - Ability: happiness factor
Pets - Ability: burnout mitigator
Pets - Ability: sickness decreased
Pets - Ability: scarecrow effect - bonus to harvest yields (uncertain)
Pets - Ability: pick up items in the world
Pets - Ability: Locate certain ore types or crop types
Pets - Ability: Move items from point A to point B.
Achievements
Recycling: Cancel button for the processor
Recycling: Add "Sort" module.
Recycling: Incinerator mode.
Recycling: Repair mode (identify damaged items and if the material they were created with is available in the recycling center OR multiple of the same type of item exist, repair the damage)
Recycling: Split recycled enchanted books into one book per spell.
Building: Resort - Add last vacation (x days ago) to citizen screen
Add Happiness for Trade Post factors (like vacation, etc.)
Building: Marketplace - Refactor pricing logic to an "analyze me" strategy, rather than pre-calculating all item values (expensive, slow) 
Building: Station - Link multiple trades at similiar positions on the track into one connected train. (Aesthetic)
Building Effect: Happiness based on colony wealth per citizen  
Item: In-Game Instructions
Wishing Well Rituals: Summon Trader
Research: Unlock Trader Recipes
Jobs: Orchards
Jobs: Farmer Mushroom growing ability

### Intersecting Roadmap
**Minecolonies discord or other source has indicated these may be in the future of the base mod. As those features emerge, these may be deprecated or altered to better fit with the base mod.**
Assembling colonies into collections (empire, state, etc.)  
Intra-colony trade

#### Random ideas that may never be implemented:
Advanced Guard Towers (prevent mob spawning within an area of effect).
Recycler Building Capability: Trash Disposal 
Advanced Stash: allows configurability for courier summoning

## Additional Resources
Community Documentation: [Neoforge documentation](https://docs.neoforged.net/)  
NeoForged Discord: [Neoforge discord](https://discord.neoforged.net/)  
Minecolonies: [MineColonies Home](https://minecolonies.com/)  

## Known Issues
### Fix Implemented - In Testing
Vacationers will sometimes complain about needing stuff even when not on vacation. [Test]
Station: After trade arrives, request pick-up by courier. [Test]
Pet building assignment selection list can be slow to refresh from the view. [Test]

### Pending Resolution
If a herding target is stuck (frozen in place - such as trapped in amber as can happen in ATM 10) the pet does not handle this gracefully. It never gives up trying to move the immovable object.
Ivy Block types not previewable in Domum.

### Low Priority Issues
Tracing is global (rather than by colony)
